<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hello, AGOL!</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />

  <!-- Calls for the ArcGIS api's CSs and JS library. -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.25/"></script>

  <!-- CSS to make full screen map. -->
  <style>  html,  body,  #viewDiv {  
    padding: 0;  
    margin: 0;  
    height: 100%;  
    width: 100%;  
    }

  /* Basemap Gallery styles */
  #viewDiv .esri-basemap-gallery {
    width: 200px; /* Default width */
    height: 200px; /* Default height */
  }

  /* Media query to make it responsive on mobile devices */
  @media (max-width: 600px) {
    #viewDiv .esri-basemap-gallery {
      width: 150px; /* Smaller width for mobile */
      height: 150px; /* Smaller height for mobile */
    }
  }

  </style> 

</head>

<body>
  <!-- <h1>Hello, world! I'm using Git!</h1> -->
  <!-- The div to display the map -->
  <div id="viewDiv"></div> 

  <!-- Adding required modules for a full screen map app. -->
  <script>  
  require([
    "esri/config", 
    "esri/Map", 
    "esri/views/MapView",
    "esri/widgets/BasemapGallery",
    "esri/portal/PortalItem",
    "esri/widgets/Locate",
    "esri/widgets/Search",
    "esri/widgets/Expand",
    "esri/Graphic",  
    "esri/layers/GraphicsLayer"  
  ], function(esriConfig, Map, MapView, BasemapGallery, PortalItem, Locate, Search, Expand, Graphic, GraphicsLayer) {
    
    // Log into the API
    esriConfig.apiKey = "AAPTxy8BH1VEsoebNVZXo8HurC-WNby9xVB5CaUbYmSkdtsZmMyGnfH1JuHkPFwFFSBd3Z-v-N7m_s6f1dmRgKVLamcFHqSo0cttTR09tKsFzmbXZUhJIfKzl2R6HLQtKWGyGlzHobrqUHrwEOtLR9miyCr3AH4LGIs4bD8J_IfjNZJFYZiID06JxdIjFa_CX5wLcu2d2_5Pr2huNg7-z1mKuSnOsU5nBktIt9t_XxG-4s-ytgy_1uafScxdrTypBn4BAT1_UUjVT5i4";
  
    // Create the map
    const map = new Map({
      // basemap: "arcgis-hillshade-dark" // Basemap layer service
      basemap: "arcgis-colored-pencil" // Basemap layer service
      // basemap: "arcgis-nova" // Basemap layer service
      // basemap: "streets" // Basemap layer service
    });

    // Try any of these: "arcgis-imagery", "arcgis-imagery-standard", "arcgis-imagery-labels", "arcgis-light-gray", "arcgis-dark-gray", "arcgis-navigation", "arcgis-navigation-night", "arcgis-streets", "arcgis-streets-night", "arcgis-streets-relief", "arcgis-topographic", "arcgis-oceans", "osm-standard", "osm-standard-relief", "osm-streets", "osm-streets-relief", "osm-light-gray", "osm-dark-gray", "arcgis-terrain", "arcgis-community", "arcgis-charted-territory", "arcgis-colored-pencil", "arcgis-nova", "arcgis-modern-antique", "arcgis-midcentury", "arcgis-newspaper", "arcgis-hillshade-light", "arcgis-hillshade-dark", "arcgis-human-geography", "arcgis-human-geography-dark"

    // Create the View
    const view = new MapView({
      map: map,
      center: [-91.101, 46.8536], // Longitude, latitude
      zoom: 13, // Zoom level
      // scale: 24000, // Scale 1:24,000
      container: "viewDiv" // Div element
    });

    // Adding the constructor for the Graphics Layer
    const graphicsLayer = new GraphicsLayer();
    map.add(graphicsLayer);

    const point = {
      type: "point",
      longitude: -91.098541,
      latitude: 46.859670
    };

    const simpleMarkerSymbol = {
      type: "simple-marker",
      style: "cross",
      color: [255,255, 255],  // Color of blues rock
      outline: {
        color: [5,5,5],
        width: 1
      }
    };

    const pointGraphic = new Graphic({  
      geometry: point,  
      symbol: simpleMarkerSymbol  
    });

    graphicsLayer.add(pointGraphic);

    // Create the BasemapGallery widget
    const basemapGallery = new BasemapGallery({
      view: view, // Map view for the widget
      container: document.createElement("div") // Create a div to hold the widget
    });

    // Create the Expand widget to wrap the BasemapGallery
    const basemapGalleryExpand = new Expand({
      view: view, // MapView instance
      content: basemapGallery, // Set the BasemapGallery as content
      expandIconClass: "esri-icon-basemap", // Icon for the expand button (optional)
      expanded: false // Start collapsed (default)
    });

    // Add the BasemapGallery Expand widget to the bottom-right of the view
    view.ui.add(basemapGalleryExpand, "bottom-right");

    // // Add the BasemapGallery widget to the top-right corner of the view
    // view.ui.add(basemapGallery, "bottom-right");

    // Create the Locate widget
    const locateWidget = new Locate({
      view: view, // MapView instance
      useTracking: true // Enables continuous tracking (optional)
    });

    // Add the Locate widget to the top-right corner of the view
    view.ui.add(locateWidget, "top-left"); 

    // Create the Search widget with proper configuration
    const searchWidget = new Search({
      view: view,
      popupEnabled: true,
      popupOpenOnSelect: false,
      includeDefaultSources: true // This ensures default geocoding services are used
    });

    // Add the Search widget to the top-right corner
    view.ui.add(searchWidget, {
      position: "top-right",
      index: 0
    });
  
  });  
  </script>

</body>
</html>>
